// Mining sessions
model MiningSession {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    // Session Data
    userId    String
    nodeId    String
    startTime DateTime  @default(now())
    endTime   DateTime?

    // Echo Transmission Integration
    echoTransmissionApplied Boolean @default(false)
    timeReductionPercent    Int     @default(0) // 0-40%

    //bins
    latitudeBin  Int? // Binned lat (e.g., floor(lat / 10) * 10)
    longitudeBin Int? // Binned lon

    // Rewards
    minerSharesEarned Float @default(0)

    // Session Status
    status SessionStatus @default(ACTIVE)

    // Relations
    user User @relation(fields: [userId], references: [id], onDelete: Cascade)
    node Node @relation(fields: [nodeId], references: [id])

    @@unique([userId, nodeId])
    @@index([latitudeBin, longitudeBin]) // For efficient queries on latitudeBin/longitudeBin
    @@map("mining_sessions")
}

// Enums
enum SessionStatus {
    ACTIVE
    COMPLETED
    CANCELLED
}
